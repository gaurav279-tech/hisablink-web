<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>HisabLink â€” Login / Signup</title>
<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = {
    theme: {
      extend: {
        colors: { gold:"#c6a14b" }
      }
    }
  }
</script>

<style>
/* Floating label input */
.group { position: relative; }
.group input {
  width:100%; padding:13px 12px;
  border:1px solid #d3d3d3; border-radius:10px;
  background:rgba(255,255,255,.9);
  transition: .2s;
}
.group input:focus { border-color:var(--tw-color-gold); box-shadow:0 0 0 3px rgba(198,161,75,.25); outline:none; }
.group label {
  position:absolute; top:14px; left:12px;
  font-size:14px; color:#777; pointer-events:none;
  transition:.2s;
}
.group input:focus + label,
.group input:not(:placeholder-shown)+label {
  top:-6px; left:8px; background:white;
  padding:0 6px; font-size:11px; color:#c6a14b;
}

/* gradient blobs BG */
.blob{position:absolute;width:420px;height:420px;border-radius:50%;
background:linear-gradient(135deg,#6366f1,#ec4899,#facc15);
filter:blur(120px);opacity:.28;animation:blob 12s infinite ease-in-out;}
.blob2{animation-delay:-4s;}
@keyframes blob{
0%{transform:translate(-20%,-15%) scale(1);}
33%{transform:translate(30%,-10%) scale(1.2);}
66%{transform:translate(10%,25%) scale(.9);}
100%{transform:translate(-20%,-15%) scale(1);}
}
</style>
</head>

<body class="min-h-screen flex items-center justify-center bg-gray-50 p-6 relative overflow-hidden">

<div class="blob"></div>
<div class="blob blob2"></div>

<div class="glass relative z-10 w-full max-w-md bg-white/40 backdrop-blur-xl border border-white/50 shadow-2xl rounded-2xl p-8">

  <div class="text-center mb-6">
    <div class="w-16 h-16 rounded-2xl border border-gold flex items-center justify-center text-2xl font-extrabold mx-auto">
      <span class="text-gold">HL</span>
    </div>
    <h1 class="mt-2 text-3xl font-extrabold">Hisab<span class="text-gold">Link</span></h1>
    <p class="text-gray-600 text-sm">AI-powered business finance suite</p>
  </div>

  <!-- Tabs -->
  <div class="flex mb-4 bg-white/50 rounded-lg overflow-hidden">
    <button id="tabLogin" class="w-1/2 py-2 font-semibold bg-gold text-white">Login</button>
    <button id="tabSignup" class="w-1/2 py-2 font-semibold text-gray-700">Sign Up</button>
  </div>

  <!-- LOGIN FORM -->
  <form id="loginForm" class="space-y-4">
    <div class="group">
      <input id="loginEmail" type="email" placeholder=" " required>
      <label>Email</label>
    </div>

    <div class="group">
      <input id="loginPass" type="password" placeholder=" " required>
      <label>Password</label>
    </div>

    <button class="w-full bg-gold text-white font-semibold py-3 rounded-lg hover:bg-yellow-600 transition">Login</button>

    <button id="googleBtn" type="button" class="w-full bg-white border py-3 rounded-lg flex items-center justify-center gap-2 font-medium hover:shadow">
      <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" width="20">
      Continue with Google
    </button>
  </form>

  <!-- SIGNUP FORM -->
  <form id="signupForm" class="space-y-4 hidden">
    <div class="group">
      <input id="signupName" placeholder=" " required>
      <label>Full Name</label>
    </div>
    <div class="group">
      <input id="signupEmail" type="email" placeholder=" " required>
      <label>Email</label>
    </div>
    <div class="group">
      <input id="signupPhone" placeholder=" " required>
      <label>Phone Number</label>
    </div>
    <div class="group">
      <input id="signupPass" type="password" placeholder=" " required>
      <label>Create Password</label>
    </div>

    <button class="w-full bg-gold text-white font-semibold py-3 rounded-lg hover:bg-yellow-600 transition">Create Account</button>
  </form>

  <p class="text-xs text-center text-gray-500 mt-4">
    By continuing, you agree to our <a class="underline">Terms</a> & <a class="underline">Privacy Policy</a>
  </p>
</div>

<p class="text-xs text-gray-500 text-center mt-6 relative z-10">
  Â© <span id="year"></span> HisabLink â€¢ Made in ðŸ‡®ðŸ‡³
</p>

<script type="module">
import "./firebase.js";
import {
  auth, db, GoogleAuthProvider, signInWithPopup, createUserWithEmailAndPassword,
  signInWithEmailAndPassword, doc, setDoc, serverTimestamp
} from "./firebase.js";

/* YEAR */
document.getElementById("year").textContent = new Date().getFullYear();

/* TAB SWITCH */
const loginForm=document.getElementById("loginForm");
const signupForm=document.getElementById("signupForm");
tabLogin.onclick=()=>{tabLogin.classList.add("bg-gold","text-white");tabSignup.classList.remove("bg-gold","text-white");loginForm.classList.remove("hidden");signupForm.classList.add("hidden");};
tabSignup.onclick=()=>{tabSignup.classList.add("bg-gold","text-white");tabLogin.classList.remove("bg-gold","text-white");signupForm.classList.remove("hidden");loginForm.classList.add("hidden");};

/* SIGN UP */
signupForm.onsubmit = async e=>{
  e.preventDefault();
  const email=signupEmail.value, pass=signupPass.value;

  const r = await createUserWithEmailAndPassword(auth,email,pass);
  await setDoc(doc(db,"users",r.user.uid),{
    uid:r.user.uid, name:signupName.value, phone:signupPhone.value, email,
    createdAt: serverTimestamp()
  });
  location.href="onboarding.html"; // next file we will build
};

/* LOGIN */
loginForm.onsubmit = async e=>{
  e.preventDefault();
  await signInWithEmailAndPassword(auth,loginEmail.value,loginPass.value);
  location.href="dashboard.html";
};

/* GOOGLE */
googleBtn.onclick = async ()=>{
  const g = new GoogleAuthProvider();
  const r = await signInWithPopup(auth,g);
  await setDoc(doc(db,"users",r.user.uid),{
    uid:r.user.uid,name:r.user.displayName,email:r.user.email,phone:r.user.phoneNumber||"",createdAt:serverTimestamp()
  },{merge:true});
  lshowToast("Account created âœ… Redirecting...");
setTimeout(()=> location.href="verify-phone.html", 1200);

};
</script>
</body>
</html>
